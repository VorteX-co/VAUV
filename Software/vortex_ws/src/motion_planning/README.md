# Motion Planning Package

## Description

This package deals with finding an optimal or sub-optimal route between an origin point and a termination point in marine environments. The underwater environment is still considered as a great challenge for the path planning of autonomous underwater vehicles (AUVs) because of its dynamic nature, So this package aims to make the AUV more adaptable to these challenges.

It consists of four modules (localization, global planner, local planner and motion control)

* Localization: determine AUV's place in the 3D space around it and also determines the location of the obstacles and objects surrounding it.

* The Global Planner: give the AUV the ability to plan the correct and feasible path through the starting point to its goal.

* The Local Planner: generate a set of control commands that moves the AUV on the path generated by the Global Planner but by taking the dynamics into consideration while also trying to avoid obstacles.

* Motion Control: translate the set of control commands from the Local Planner into actions for the thrusters


### License

The source code is released under a [GNU GENERAL PUBLIC LICENSE](https://github.com/VorteX-co/VAUV/blob/master/LICENSE)

**Author: vortex-co<br />
Affiliation: [VorteX-Co](https://vortex-co.com/home)<br />
Maintainer: vortex-co, info@vortex-co.com**

The motion planning  module package has been tested under [ROS2](https://index.ros.org/doc/ros2/) eloquent on Ubuntu 18.04 

## Table of contents

* [Usage](#Usage)
* [Config files](#Config-files)
* [Launch files](#Launch-files)
*  [Nodes](#Nodes)
* [Hardware](#hardware)



## Usage
 
   * Source your ROS2 installation
   
         source /opt/ros/eloquent/setup.bash
     
   * Navigate to your workspace
   
         cd ~/$HOME/VAUV/Software/vortex_ws

   * Build your package

         colcon build --packages-select <package_name>

   * Start to run node by node with
   
         ros2 run motion_planning <node_name>

   * or launch file with
     
         ros2 launch motion_planning launch_file_name.launch.py


## Config files


...

## Launch files

...
 
     

## Nodes


### pose_estimation node 
Estimates 3D state of the AUV with the usage of DVL, IMU, point cloud data and visual odometry from the stereo camera.



#### Subscribed Topics
* /fused_date

#### Published Topics
* /estimated_pose

#### Services
..


#### Parameters
....

### local_SLAM node 
Generates a series of poses and sub-maps by matching this generated poses with a reference scan.
#### Subscribed Topics
* /estimated_pose

#### Published Topics
* /submaps
#### Services

...

#### Parameters
...


### global_SlAM node 
Updates the poses/states generated from local_SLAM node and then updates the sub-maps to create a Global 3D map.

#### Subscribed Topics
* /submaps
#### Published Topics
* /global_3D_map

#### Services
...


#### Parameters
...

### searching node
It aims to find the optimal path from the AUV current location to it is goal and continuously validating this path.


#### Subscribed Topics
...

#### Published Topics
* /initial_path

#### Services

...

#### Parameters
...

### path_smoothing node 
Draws curved turns instead of sharp turns‚Äè by using a smoothing algorithm and the AUV's local pose.

#### Subscribed Topics
* /initial_path
#### Published Topics
* /smoothed_path
 
#### Services
....

#### Parameters
...

### obstacle_detection node 
Responsible for the process in which the upcoming objects in the path are detected using a deep learning model based on fused data from Sensors package.

#### Subscribed Topics
....
#### Published Topics
..
### subnode_processing node
Regenerate a new path based on surrounding environment if an obstacle is detected.

#### Subscribed Topics
...
#### Published Topics
...

### vector_processing node
Dealing with regenerated path from  subnode_processing node and give the required motion profile for the control system of the AUV.
#### Subscribed Topics
...
#### Published Topics

...
### motion_control node  
Translate the set of control commands from the Local Planner into actions for the thrusters


#### Subscribed Topics
..
#### Published Topics
..
#### Services
...
#### Parameters
...





.
## Hardware
This package accesses the following hardware:

* Pixhawk4

 

[ROS]: http://www.ros.org
[rviz]: http://wiki.ros.org/rviz
[Eigen]: http://eigen.tuxfamily.org


